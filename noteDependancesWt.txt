dépendances wt pour webAptitude ; 

git clone https://github.com/JoLeBelge/Forestimator
git submodule init
git submodule update

installation de libzipp
sudo apt install zlib1g-dev libzip-dev liblzma-dev libbz2-dev
cd cWebAptitude/libzippp/
mkdir build && cd build
cmake .. -DCMAKE_BUILD_TYPE=Release
make && make install
make && sudo make install


contenu git/config LOCAL:
[core]
	repositoryformatversion = 0
	filemode = true
	bare = false
	logallrefupdates = true
[remote "origin"]
	url = https://JoLeBelge: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@github.com/JoLeBelge//Forestimator.git
	fetch = +refs/heads/*:refs/remotes/origin/*
[branch "master"]
	remote = origin
	merge = refs/heads/master
[submodule "cWebAptitude/libzippp"]
	url = https://github.com/ctabin/libzippp
	active = true
	
Contenu git config GLOBAL, accessible via git config --global --edit

[user]
        user = JoLeBelge
        email = liseinjon@hotmail.com
        name = lisein
        #password=joaigun1
        password = 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
[credential]
        helper = cache
        
        
        
git clone https://github.com/emweb/wt.git Wt

sudo apt install libgraphicsmagick++1-dev libpango1.0-dev cmake mercurial libcurl4-openssl-dev cmake-curses-gui

# package pour compilation forestimator
sudo apt install sqlite3 libgdal-dev lzip libboost-all-dev

libharu ; compiler depuis les sources.
git clone https://github.com/libharu/libharu
mkdir build
cd build ../
cmake ../
make -j2
make install

compilation wt ; 
cmake -DWT_WRASTERIMAGE_IMPLEMENTATION="GraphicsMagick" ..

hélas WRasterImage est foireux, image dédoublée et avec couleur mauvâtre. ce doit être le problème de QuantumDepth qui est mal paramètré. (8 au lieu de 16 je suppose)

Sur ma machine si je change les paramètres de cmake pour wt GM_INCLUDE_DIR, GM_LIB et GM_PREFIX comme ceci;

cmake -DWT_WRASTERIMAGE_IMPLEMENTATION="GraphicsMagick" -DGM_INCLUDE_DIR="/usr/local/include/GraphicsMagick" -DGM_LIB="/usr/local/lib/libGraphicsMagick.so" -DGM_PREFIX="/usr/local/include/GraphicsMagick" ..

le problème est reglé. Donc si je comprend bien il faut compiler GM depuis les sources :

hg clone http://hg.code.sf.net/p/graphicsmagick/code/ GM
cd GM
./configure --enable-shared --with-quantum-depth=16
sudo make install

et ensuite

cmake -DWT_WRASTERIMAGE_IMPLEMENTATION="GraphicsMagick" -DGM_INCLUDE_DIR="/usr/local/include/GraphicsMagick" -DGM_LIB="/usr/local/lib/libGraphicsMagick.so" -DGM_PREFIX="/usr/local/include/GraphicsMagick" ..
make -j8
make install
les librairies sont dans /usr/local/lib, il faut ajouter ce chemin dans notre config
gedit /etc/ld.so.conf
ajout ligne /usr/local/lib
puis
sudo ldconfig



ok ça fonctionne sur le serveur également


------------- lien symbolique pour couches sur servcarto ---------

il faut créer les directory data1/Carto/FEEW2020/, /data1/Carto/CS, puis y créer les liens symboliques
sudo mkdir /data1 et tout ça
sudo ln -s /media/Data10/Forestimator/Station/* /data1/Carto/FEEW2020/
sudo ln -s /media/Data10/Forestimator/Station/* /data1/Carto/CS/

sudo ln -s /media/Data10/Forestimator/Autre/* /data1/Carto/Autre/
sudo ln -s /media/Data10/Forestimator/Autre/* /data1/Carto/Autre/ES_EP
sudo ln -s /media/Data10/Forestimator/Autre/* /data1/Carto/CS/

sudo ln -s /media/Data10/Forestimator/CS/* /data1/Carto/FEE/
sudo ln -s /media/Data10/Forestimator/FEE/* /data1/Carto/FEE/
sudo ln -s /media/Data10/Forestimator/KKCS/* /data1/Carto/FEE/

lien de webaptitude vers data1
sudo ln -s /home/carto/app/Forestimator/* /data1/Forestimator/

-- finalement on abandonne l'utilisation des liens symboliques, c'est déjà assez le bronx comme ça







